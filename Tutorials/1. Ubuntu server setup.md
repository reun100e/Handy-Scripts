### 1. Installing Ubuntu Server

First, you'll need to install Ubuntu Server on your laptop. It's recommended to use the latest Long-Term Support (LTS) version for stability and extended support.

*   **Download Ubuntu Server:** Head to the official Ubuntu Server download page and get the latest LTS version.
*   **Create a Bootable USB Drive:** You will need a separate computer to create a bootable USB drive. Tools like Rufus (on Windows) or balenaEtcher (on macOS and Linux) can be used to write the downloaded ISO file to a USB stick.
*   **Installation Process:**
    1.  Insert the bootable USB drive into your old laptop and boot from it. You might need to change the boot order in the BIOS/UEFI settings.
    2.  Follow the on-screen instructions to select your language, keyboard layout, and network settings. For networking, it's generally fine to start with DHCP, which will automatically assign an IP address.
    3.  For storage, the installer offers an option to "Use entire disk." This is the simplest choice if you don't have other data on the hard drive.
    4.  During the installation, you'll be prompted to set up a user profile with a username and password. Remember these credentials, as you'll need them to log in.
    5.  Crucially, when prompted to install additional software, make sure to select **OpenSSH server**. This will allow you to access your server remotely.
    6.  Once the installation is complete, reboot the system and remove the USB drive.

### 2. Initial Server Configuration and SSH Access

With Ubuntu Server installed, it's time to log in and perform some initial setup. You'll be working from the command line.

*   **Find Your Server's IP Address:** After logging in, find your server's local IP address with the following command:
    ```bash
    ip a
    ```
    Look for an entry like `inet 192.168.1.X` under your network interface (e.g., `enp0s3` or `eth0`).

*   **Connect via SSH:** From another computer on the same network, you can now connect to your server using SSH. This allows you to manage the server remotely without needing a dedicated monitor and keyboard connected to the laptop.

    On Windows, you can use PowerShell or a client like PuTTY. On macOS or Linux, use the terminal.
    ```bash
    ssh your_username@your_server_ip
    ```
    Replace `your_username` and `your_server_ip` with the credentials you set up during installation.

### 3. Securing Your Server with a Firewall (UFW)

Before exposing your server to the internet, it's vital to set up a basic firewall. Ubuntu comes with `ufw` (Uncomplicated Firewall), which is easy to configure.

*   **Allow Essential Traffic:** First, you need to allow SSH connections so you don't get locked out. You'll also need to allow HTTP and HTTPS traffic for your web projects.
    ```bash
    sudo ufw allow OpenSSH
    sudo ufw allow http
    sudo ufw allow https
    ```

*   **Enable the Firewall:**
    ```bash
    sudo ufw enable
    ```
    You will be warned that this may disrupt existing SSH connections. Since you've already allowed SSH, it's safe to proceed.

*   **Check Firewall Status:** You can see which rules are active with:
    ```bash
    sudo ufw status
    ```

### 4. Installing Docker

Docker will be the backbone of your testing environment, allowing you to run your projects in isolated containers.

*   **Install Docker from the Official Repository:** To ensure you have the latest version, it's best to use the official Docker repository.
    1.  Update your package list and install necessary dependencies:
        ```bash
        sudo apt update
        sudo apt install apt-transport-https ca-certificates curl software-properties-common
        ```
    2.  Add Docker's official GPG key:
        ```bash
        curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
        ```
    3.  Add the Docker repository:
        ```bash
        echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
        ```
    4.  Install Docker Engine:
        ```bash
        sudo apt update
        sudo apt install docker-ce docker-ce-cli containerd.io
        ```

*   **Manage Docker as a Non-Root User (Optional but Recommended):** To avoid having to type `sudo` for every Docker command, add your user to the `docker` group.
    ```bash
    sudo usermod -aG docker your_username
    ```
    You will need to log out and log back in for this change to take effect.

### 5. Setting Up No-IP for Dynamic DNS

Since your home internet likely has a dynamic IP address, a dynamic DNS service like No-IP will keep your domain `lib.onthewifi.com` pointing to your server.

*   **Install the No-IP Dynamic Update Client (DUC):**
    1.  Navigate to a directory where you can download the client:
        ```bash
        cd /usr/local/src/
        ```
    2.  Download and extract the No-IP client:
        ```bash
        sudo wget http://www.no-ip.com/client/linux/noip-duc-linux.tar.gz
        sudo tar xf noip-duc-linux.tar.gz
        ```
    3.  Navigate into the newly created directory (the version number might differ):
        ```bash
        cd noip-2.1.9-1/
        ```
    4.  Compile and install the client. You might be prompted to install `build-essential` if it's not already on your system (`sudo apt install build-essential`).
        ```bash
        sudo make install
        ```
    5.  During the installation, you'll be prompted for your No-IP username and password, and you can select which hostnames to update.

*   **Configure No-IP to Run as a Service:** To ensure the client runs automatically on startup, you can create a systemd service.
    1.  Create a new service file:
        ```bash
        sudo nano /etc/systemd/system/noip2.service
        ```
    2.  Paste the following content into the file:
        ```
        [Unit]
        Description=No-IP Dynamic DNS Update Service
        After=network.target

        [Service]
        Type=forking
        ExecStart=/usr/local/bin/noip2

        [Install]
        WantedBy=multi-user.target
        ```
    3.  Reload the systemd daemon, enable, and start the service:
        ```bash
        sudo systemctl daemon-reload
        sudo systemctl enable noip2
        sudo systemctl start noip2
        ```

### 6. Setting Up Caddy as a Reverse Proxy

Caddy is an excellent choice for a reverse proxy as it's easy to configure and automatically handles HTTPS certificates.

*   **Install Caddy:**
    1.  Install the necessary dependencies:
        ```bash
        sudo apt install -y debian-keyring debian-archive-keyring apt-transport-https
        ```
    2.  Add the Caddy repository's GPG key and the repository itself:
        ```bash
        curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/gpg.key' | sudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg
        curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt' | sudo tee /etc/apt/sources.list.d/caddy-stable.list
        ```
    3.  Update your package list and install Caddy:
        ```bash
        sudo apt update
        sudo apt install caddy
        ```

*   **Configure Your Caddyfile:** Caddy's configuration is managed in a file called `Caddyfile`. The default location is `/etc/caddy/Caddyfile`.
    1.  Open the Caddyfile for editing:
        ```bash
        sudo nano /etc/caddy/Caddyfile
        ```
    2.  You can now add your reverse proxy configurations, similar to what you had before. For your setup, it would look something like this:
        ```
        lib.onthewifi.com {
            reverse_proxy 127.0.0.1:8083
        }

        vc.onthewifi.com {
            reverse_proxy 127.0.0.1:8096
        }
        ```
        **Note:** It's a good practice to proxy to `127.0.0.1` (localhost) as the services are running on the same machine.

*   **Port Forwarding:** For Caddy to receive traffic from the internet, you'll need to configure your router to forward ports 80 (for HTTP) and 443 (for HTTPS) to the local IP address of your Ubuntu server. The process for this varies depending on your router's manufacturer.

### Next Steps and Best Practices

*   **Running Your Projects:** Now you can run your web applications inside Docker containers. When you run a container, you can map its internal port to a port on the server. For example, if your application inside a Docker container listens on port 3000, you would run it with `docker run -p 8083:3000 your_app_image`. Caddy will then forward traffic from `lib.onthewifi.com` to port 8083 on your server, which is mapped to your container's port 3000.

*   **Backups:** Regularly back up your important data and configurations.

*   **System Updates:** Keep your server updated with the latest security patches by regularly running:
    ```bash
    sudo apt update && sudo apt upgrade
    ```

You now have a fully functional and secure home server ready for your development projects. This setup provides a flexible and powerful environment for testing and deploying your applications.